{% if module.tag_box and module.tag_box|length %}
  <div class="accordion">
    <div class="accordion__card">
      {% for tag in module.tag_box %}
        <div class="accordion__item">
          <div class="accordion__header">
            {{ tag.tag_name }}
          </div>
          <div class="accordion__divider"></div>
          <div class="accordion__content">
            {% for btn in tag.program_button %}
              {# Solo muestra si hay URL #}
              {% if btn.program_link.url.href %}
                <a 
                  href="{{ btn.program_link.url.href }}" 
                  {% if btn.program_link.open_in_new_tab %}target="_blank"{% endif %}
                  {% if btn.program_link.no_follow %}rel="nofollow"{% endif %}
                >
                  {{ btn.program_name }}
                </a>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% else %}
  {# Fallback si no has añadido ningún tag #}
  <p>Configura al menos un “Tag box” en el módulo.</p>
{% endif %}
